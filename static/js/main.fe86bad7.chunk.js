(this["webpackJsonpreact-task-tracker"]=this["webpackJsonpreact-task-tracker"]||[]).push([[0],{15:function(e,t,n){},20:function(e,t,n){"use strict";n.r(t);var a=n(1),o=n.n(a),r=n(10),c=n.n(r),i=(n(15),n(8)),s=n(5),l=n(2),f=n(4),d=n.n(f),u=n(0);function h(e){var t=[];for(e=e.firstChild;e;e=e.nextSibling)3==e.nodeType?t.push(e):t=t.concat(h(e));return t}var j=function(e){var t=e.id,n=e.children,a=e.removeRange,o=e.colorClass;return Object(u.jsx)("mark",{className:o,onClick:function(e){e.stopPropagation(),a(t)},children:n})},O=function(e){var t=e.ranges,a=e.text,r=e.handleHighlight,c=e.deleteMark,i=e.colorClass,s=function(e){c(e)},l=function(){if(t.sort((function(e,t){return e.offset-t.offset})),0===t.length)return a;for(var e=[a.slice(0,t[0].offset)],n=0;n<t.length-1;n++){var o=t[n],r=t[n+1];e.push(Object(u.jsx)(j,{id:o.id,removeRange:s,colorClass:o.colorClass,children:a.slice(o.offset,o.offset+o.length+1)},o.id)),e.push(a.slice(o.offset+o.length+1,r.offset))}var c=t[t.length-1];return e.push(Object(u.jsx)(j,{id:c.id,removeRange:s,colorClass:c.colorClass,children:a.slice(c.offset,c.offset+c.length+1)},c.id)),e.push(a.slice(c.offset+c.length+1,a.length)),e}(),f=o.a.createRef();return Object(u.jsx)("div",{ref:f,onMouseUp:function(e){if(e.target===f.current){e.stopPropagation();var t=window.getSelection().getRangeAt(0),o=t.commonAncestorContainer;if(t.startContainer===o)if(t.startContainer.nodeType===Node.TEXT_NODE)if(t.startOffset!==t.endOffset){console.log(t.startOffset,t.endOffset);for(var c=Array.prototype.indexOf.call(f.current.childNodes,t.startContainer),s=[],l=0;l<c;l++){var d=f.current.childNodes[l];d.nodeType==Node.TEXT_NODE?s.push(d):s.push(h(d))}var u=s.flat().reduce((function(e,t){return e+t.length}),0),j=u+t.startOffset,O=u+t.endOffset,g=a.substring(j,O),b=n(9)().tokenize(g),p=[];p.push('Token: "'.concat(b[0].value,'"\nToken Tag: "').concat(b[0].tag,'"\nBIO Tag: B\n'));for(var x=1;x<b.length;x++)p.push('\nToken: "'.concat(b[x].value,'"\nToken Tag: "').concat(b[x].tag,'"\nBIO Tag: I\n'));r({id:Math.random().toString(16).slice(2),offset:j,length:O-j-1,endIndex:O,colorClass:i,annotatedText:g,annotatedStringBIOCombinations:p})}else console.log("Same offset");else console.log("Not a TEXT NODE");else console.log("There is another element in here")}},children:l})},g=function(e){var t=e.text,n=e.className,a=e.onClick,o=e.id;return Object(u.jsx)("button",{className:n,onClick:a,id:o,children:t})},b=function(e){var t=e.list,n=Object(a.useState)(""),o=Object(l.a)(n,2),r=o[0],c=o[1];return Object(a.useEffect)((function(){!function(){var e=new Blob([t.join("\n")],{type:"text/plain"});""!==r&&window.URL.revokeObjectURL(r),c(window.URL.createObjectURL(e))}()}),[t]),Object(u.jsx)("a",{id:"exportLink",download:"annotations.txt",href:r,children:"Export"})},p=function(){for(var e=Object(a.useState)(!0),t=Object(l.a)(e,2),o=t[0],r=t[1],c=Object(a.useState)(!1),f=Object(l.a)(c,2),h=f[0],j=f[1],p=Object(a.useState)(!1),x=Object(l.a)(p,2),m=(x[0],x[1]),v=Object(a.useState)("personTag"),C=Object(l.a)(v,2),k=C[0],T=C[1],B=Object(a.useState)("Person"),N=Object(l.a)(B,2),S=N[0],w=N[1],I=Object(a.useState)(" Presidio Bank (OTCBB: PDOB), sdasa Bay Area business bank, today reported unaudited results for the first quarter ended March 31, 2019 with Net Income of $3.1 million, down from $3.3 million in the fourth quarter of 2018 and up from $2.2 million (38%) in the first quarter of 2018. Presidio Bank (OTCBB: PDOB), a Bay Area business bank, today reported unaudited results for the first quarter ended March 31, 2019 with Net Income of $3.1 million, down from $3.3 million in the fourth quarter of 2018 and up from $2.2 million (38%) in the first quarter of 2018."),y=Object(l.a)(I,2),E=y[0],P=y[1],R=Object(a.useState)([]),L=Object(l.a)(R,2),A=L[0],D=L[1],M=Object(a.useState)([]),q=Object(l.a)(M,2),$=q[0],F=q[1],U=Object(a.useState)([]),z=Object(l.a)(U,2),X=z[0],H=z[1],J=Object(a.useState)([]),_=Object(l.a)(J,2),G=_[0],K=_[1],Q=function(){var e=Object(i.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.preventDefault(),(n=new FileReader).onload=function(){var e=Object(i.a)(d.a.mark((function e(t){var n;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=t.target.result,P(n),K([]);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n.readAsText(t.target.files[0]);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=[],W=0;W<G.length;W++){G[W].id;var Y=G[W].offset,Z=(G[W].annotatedString,G[W].annotatedStringBIOCombinations),ee=G[W].colorClass,te=G[W].endIndex,ne="Start Index: ".concat(Y,"\nEnd Index: ").concat(te,"\nAnnotation: ").concat(ee,"\n").concat(Z,"\n------------------------------------------------------\n");V.push(ne)}for(var ae=n(9)().tokenize(E),oe=0;oe<ae.length;oe++){for(var re=function(e,t){return[e.indexOf(t),e.indexOf(t)+t.length-1]}(E,ae[oe].value),ce="",ie=0;ie<G.length;ie++){var se=G[ie].offset,le=G[ie].endIndex;se!=re[0]&&le!=re[1]&&(ce="Start Index: ".concat(re[0],"\nEnd Index: ").concat(re[1],'\nToken: "').concat(ae[oe].value,'"\nToken Tag: "').concat(ae[oe].tag,'"\nBIO status: O\n\n------------------------------------------------------\n'))}V.push(ce)}return Object(u.jsxs)("div",{id:"main",className:"mainItem",children:[Object(u.jsxs)("p",{children:["Now annotating: ",Object(u.jsx)("span",{className:k,children:S})]}),Object(u.jsxs)("div",{id:"topbar",children:[Object(u.jsx)("input",{type:"file",accept:".txt",className:"file-upload",onChange:function(e){return Q(e)}}),Object(u.jsxs)("div",{id:"annCategories",children:[Object(u.jsx)(g,{text:"Person",className:"annCategoryBtn",id:"personBtn",onClick:function(){r(!0),j(!1),m(!1),T("personTag"),w("Person")}}),Object(u.jsx)(g,{text:"Location",className:"annCategoryBtn",id:"locBtn",onClick:function(){r(!1),j(!0),m(!1),T("locTag"),w("Location")}}),Object(u.jsx)(g,{text:"Organization",className:"annCategoryBtn",id:"orgBtn",onClick:function(){r(!1),j(!1),m(!0),T("orgTag"),w("Organization")}}),Object(u.jsx)(b,{list:V})]})]}),Object(u.jsx)("div",{id:"mainBox",className:"middleItem",children:Object(u.jsx)(O,{ranges:G,handleHighlight:function(e){K([].concat(Object(s.a)(G),[e])),o?D([].concat(Object(s.a)(A),[e])):h?F([].concat(Object(s.a)($),[e])):H([].concat(Object(s.a)(X),[e]))},deleteMark:function(e){K(G.filter((function(t){return t.id!==e})))},text:E,colorClass:k})})]})};var x=function(){return Object(u.jsxs)("div",{children:[Object(u.jsx)("h1",{children:"Annie"}),Object(u.jsx)("div",{id:"middle",className:"mainItem",children:Object(u.jsx)(p,{})})]})},m=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,21)).then((function(t){var n=t.getCLS,a=t.getFID,o=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),o(e),r(e),c(e)}))};c.a.render(Object(u.jsx)(o.a.StrictMode,{children:Object(u.jsx)(x,{})}),document.getElementById("root")),m()}},[[20,1,2]]]);
//# sourceMappingURL=main.fe86bad7.chunk.js.map